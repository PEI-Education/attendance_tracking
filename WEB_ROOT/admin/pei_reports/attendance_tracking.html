<!--
TemplateName:Admin
-->
<!DOCTYPE html>
<html>
<head>
   <meta name="Author" content="Luke Walker, PEI Dept of Education">
   <meta name="Version" content="0.9">
	<title>Attendance Concerns Tracking</title>
<!-- required scripts -->
	~[wc:commonscripts] 
	<script src="/scripts/psQuery/psQuery.js"></script>
<!-- Required style sheets: screen.css, and print.css --> 
	<link href="/images/css/screen.css" rel="stylesheet" media="screen">
	<link href="/images/css/print.css" rel="stylesheet" media="print">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0/dist/themes/light.css" />
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0/dist/shoelace.js"></script>
    <link href="/images/css/pei_att_track.css" rel="stylesheet">
	<style>
	   #wait-spinner-div {
            position: fixed;
            top: 55%;
            left: 55%;
        }
        .padding5 {
            padding: 5px;
        }
        .half-container {
            width: 49%;
            display: inline-block;
            vertical-align: top;
        }
	</style>
</head> 
<body> 
	~[wc:admin_header_css] 
        <!-- breadcrumb start --><a href="/admin/home.html" target="_top">~[text:psx.html.admin_students.previousgrades.start_page]</a> &gt; <a href="/admin/reports/home.html">~[text:psx.html.admin_reports.runreports.reports]</a> &gt; <a href="attendance_tracking.html">Attendance Tracking</a> &gt; Mass Update Attendance Checklists<!-- breadcrumb end --> 
<!-- start of main menu and content --> 
	~[wc:admin_navigation_css]
<!-- Start of Page --> 
	<h1>Attendance Concerns Tracking</h1> 
<!-- start of content area -->
<div class="box-round" data-require-path="components/attTrack/index" data-module-name="attApp" ng-cloak>
    <div ng-controller="attGridCtrl">
        <input type="hidden" value="~(curtermid)" id="termid">
        ~[if#sch.is.a.school]
            ~[if#pref.prefschool.attendancetracking=]<div class="feedback-error">Concern Notification Email Recipients: no school recipients defined - please send email list to <a href="mailto:powerschoolhelp@cloud.edu.pe.ca">powerschoolhelp@cloud.edu.pe.ca</a>.</div>
            [else#pref]
            <div class="feedback-confirm">Concern Notification Email Recipients: ~[displayprefschool:attendancetracking]. Update this list by emailing <a href="mailto:powerschoolhelp@cloud.edu.pe.ca">powerschoolhelp@cloud.edu.pe.ca</a>.</div>
            [/if#pref]
        [/if#sch]
        <div class="feedback-info">
               <ul>
                <li>Click a tile in the carousel below to filter the list by students <strong>at or beyond</strong> a step in the checklist.</li>
                <li>Use the <strong>Current Step</strong> filter below the carousel to find all students at a specific step on the checklist.</li>
                <li>To see high school students, the term picker dropdown must be set to a semester.</li>
                <li>To see K-9 students, the term picker must be set to a full year.</li>
            </ul>
        </div>
        <div id="wait-spinner-div" ng-if="spinner.wait">
            <div data-pss-wait-spinner="large"></div>
        </div>
        <div data-ng-cloak>
            <div class="kpi-container">
                <div class="kpi-header">
                    <h3>Students with Attendance Concern Checklists</h3>
                </div>
                <div ng-show="showValidation">
                    <div class="half-container green" ng-if="validStudents.length > 0">
                        <h3>Valid Students</h3>
                        <p>The following students in your selection are eligible for changes to the selected checklist step and changes will be applied:</p>
                        <ul>
                            <li ng-repeat="student in validStudents">{{ student.firstName }} {{ student.lastName }}</li>
                        </ul>
                    </div>
                    <div class="half-container green" ng-if="!validStudents || validStudents.length===0">
                        <h3>Valid Students</h3>
                        <p>No students in your current selection are eligible for edits to the selected step. For any given student, you can only edit the most recently completed step or add the next step. <strong>Please select a different step above.</strong></p>
                    </div>
                    <div class="half-container red">
                        <h3>Invalid Students</h3>
                        <p>The following students in your selection are <strong>not</strong> eligible for changes to the selected checklist step and will not be modified:</p>
                        <ul>
                            <li ng-repeat="student in invalidStudents">{{ student.firstName }} {{ student.lastName }}</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="grid-widget-attendance" 
                 data-pss-grid-widget 
                 data-client-side-pagination="true"
                 data-data="gridData" 
                 data-filtered-data="gridDataFiltered"
                 data-filter-constraint="advanced-only"
    	         data-persist-rows-per-page="true"
    	         data-item-type-text="Students">
                <table class="grid">
                    <thead>
                    <tr>
                        ~[if.district.office]<th data-pss-sort-fields="termSchool">School</th>[/if]
                        <th data-pss-sort-fields="studentNumber|number">Student Number</th>
                        <th data-pss-sort-fields="lastName">Last Name</th>
                        <th data-pss-sort-fields="firstName">First Name</th>
                        <th data-pss-sort-fields="grade|number">Grade</th>
                        <th data-pss-sort-fields="currentStep|select" data-default-filter="normal" data-filter-info="stepMap">Current Step</th>
                        <th data-pss-sort-fields="stepDate|date">Last Action Date</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr data-ng-repeat="student in gridDataFiltered">
                       ~[if.district.office]<td class="left">{{student.termSchoolName}}</td>[/if]
                        <td class="center">
                            <a href="/admin/students/home.html?frn=001{{student.studentsdcid}}&lsp=pei_attendance_tracking.html" target="_blank">{{student.studentNumber}}</a>
                        </td>
                        <td>{{student.lastName}}</td>
                        <td>{{student.firstName}}</td>
                        <td class="center">{{student.termGrade}}</td>
                        <td>{{student.currentStep}}</td>
                        <td class="center">{{student.stepDate | date:'MM/dd/yyyy'}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- mass functions linked to grid widget -->
        	<fieldset>
        	    <legend>Available Actions</legend>
        	    <div class="button-row">
        	        To work with the set of students above, first make them your selection: 
        	        <button ng-click="makeCurrentSelection()">Make Current Student Selection</button>
        	    </div>
                <div ng-show="showActions">
                    <div class="button-row">
                        <a href='attUpdateChecklist.html' class="button">Update More</a>&nbsp;<a href="/admin/reportqueue/home.html" class="button">Visit Report Queue</a>&nbsp;<a href="/admin/pei_reports/attendance_tracking.html" class="button">Return to Attendance Tracking</a>
                    </div>
                </div>
            </fieldset>
        </div>
   </div>
<!-- end of content area --> 
	~[wc:admin_footer_css] 
</body> 
</html>